import{r as i,W as V,a as e,j as s,F as h,d as E,b as Y}from"./app-5a349bc2.js";import{v as m,C as G,A as K}from"./AuthenticatedLayout-d3ee719c.js";import{l as W,C as H,a as J,b as Q,S as u,P as X}from"./sweetalert2.all-99f6221a.js";import"./transition-082cdc27.js";import"./dialog-d7c23201.js";function Z({title:n,titleId:c,...l},d){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d,"aria-labelledby":c},l),n?i.createElement("title",{id:c},n):null,i.createElement("path",{fillRule:"evenodd",d:"M9.664 1.319a.75.75 0 01.672 0 41.059 41.059 0 018.198 5.424.75.75 0 01-.254 1.285 31.372 31.372 0 00-7.86 3.83.75.75 0 01-.84 0 31.508 31.508 0 00-2.08-1.287V9.394c0-.244.116-.463.302-.592a35.504 35.504 0 013.305-2.033.75.75 0 00-.714-1.319 37 37 0 00-3.446 2.12A2.216 2.216 0 006 9.393v.38a31.293 31.293 0 00-4.28-1.746.75.75 0 01-.254-1.285 41.059 41.059 0 018.198-5.424zM6 11.459a29.848 29.848 0 00-2.455-1.158 41.029 41.029 0 00-.39 3.114.75.75 0 00.419.74c.528.256 1.046.53 1.554.82-.21.324-.455.63-.739.914a.75.75 0 101.06 1.06c.37-.369.69-.77.96-1.193a26.61 26.61 0 013.095 2.348.75.75 0 00.992 0 26.547 26.547 0 015.93-3.95.75.75 0 00.42-.739 41.053 41.053 0 00-.39-3.114 29.925 29.925 0 00-5.199 2.801 2.25 2.25 0 01-2.514 0c-.41-.275-.826-.541-1.25-.797a6.985 6.985 0 01-1.084 3.45 26.503 26.503 0 00-1.281-.78A5.487 5.487 0 006 12v-.54z",clipRule:"evenodd"}))}const ee=i.forwardRef(Z),te=ee;function ie({title:n,titleId:c,...l},d){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d,"aria-labelledby":c},l),n?i.createElement("title",{id:c},n):null,i.createElement("path",{fillRule:"evenodd",d:"M16.403 12.652a3 3 0 000-5.304 3 3 0 00-3.75-3.751 3 3 0 00-5.305 0 3 3 0 00-3.751 3.75 3 3 0 000 5.305 3 3 0 003.75 3.751 3 3 0 005.305 0 3 3 0 003.751-3.75zm-2.546-4.46a.75.75 0 00-1.214-.883l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"}))}const ae=i.forwardRef(ie),re=ae;function se({title:n,titleId:c,...l},d){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:d,"aria-labelledby":c},l),n?i.createElement("title",{id:c},n):null,i.createElement("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z",clipRule:"evenodd"}))}const ne=i.forwardRef(se),le=ne,g="asc",oe="desc",ce=({excludedColumns:n,fetchUrl:c,columns:l,actionUrls:d,columNames:v})=>{const[f,P]=i.useState([]),[w,O]=i.useState(10),[p,C]=i.useState(l[0]),[b,x]=i.useState("desc"),[S,D]=i.useState(""),[T,$]=i.useState({}),[B,y]=i.useState(1),[R,k]=i.useState(!0),j=v||l,z=t=>{t===p?x(b===g?oe:g):(C(t),x(g))},F=i.useRef(W.debounce(t=>{D(t),y(1),x(g),C(l[0])},500)).current,I=t=>{y(1),O(t)},{get:N}=V(),M=(t,a)=>{t.preventDefault(),u.fire({title:"Remove record, Are you sure?",icon:"warning",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes sure",denyButtonText:"Not right now",allowOutsideClick:!1}).then(o=>{o.isConfirmed?N(a,{preserveScroll:!0,onSuccess:()=>{u.fire({position:"top-end",icon:"success",title:"Record has been removed successfully",showConfirmButton:!1,timer:1500,allowOutsideClick:!1})},onFinish:()=>{}}):o.isDenied&&u.fire("Record is safe","","info")})},U=(t,a)=>{if(a.certificate_id=="true")return _(route("pdf.attestation",a.id));t.preventDefault(),u.fire({title:"Generate certificate?",icon:"info",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes sure",denyButtonText:"Not right now",allowOutsideClick:!1}).then(o=>{o.isConfirmed&&N(`${d.setCertUrl}/${a.id}`,{onSuccess:()=>{u.fire({position:"top-end",icon:"success",title:" Certificate has been generated successfully",showConfirmButton:!1,timer:1500,allowOutsideClick:!1})},onError:r=>{console.log(r),u.fire({position:"top-end",icon:"error",title:"An error occurred while trying to generate the certificate",showConfirmButton:!1,timer:1500,allowOutsideClick:!1})}})})},q=(t,a)=>{if(a.badge_id=="true")return _(route("pdf.badge",a.id));t.preventDefault(),u.fire({title:"Generate badge?",icon:"info",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes sure",denyButtonText:"Not right now",allowOutsideClick:!1}).then(o=>{o.isConfirmed&&N(`${d.setBadgeUrl}/${a.id}`,{onSuccess:()=>{u.fire({position:"top-end",icon:"success",title:"Badge has been generated successfully",showConfirmButton:!1,timer:1500,allowOutsideClick:!1})},onError:r=>{console.log(r),u.fire({position:"top-end",icon:"error",title:"An error occurred while trying to generate the badge",showConfirmButton:!1,timer:1500,allowOutsideClick:!1})}})})};i.useEffect(()=>{(async()=>{k(!0);const a={search:S,sort_field:p,sort_order:b,per_page:w,page:B},{data:o}=await axios(c,{params:a});P(o.data),$(o.meta),setTimeout(()=>{k(!1)},300)})()},[w,p,b,S,B]);const L=t=>t===null?e(h,{children:"-"}):typeof t=="object"?e(h,{children:t.length>0?t.map((a,o)=>e(h,{children:s("span",{className:"inline-flex items-center gap-x-1.5 rounded-md bg-gray-100 px-1.5 py-0.5 text-xs font-medium text-gray-600",children:[e("svg",{className:"h-1.5 w-1.5 fill-gray-400",viewBox:"0 0 6 6","aria-hidden":"true",children:e("circle",{cx:3,cy:3,r:3})}),a]})})):"-"}):e(h,{children:t});return e("div",{children:e("div",{className:" -mx-4 -my-2 sm:-mx-6 lg:-mx-8",children:e("div",{className:" inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:s("div",{className:" shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:[s("div",{className:"flex justify-between p-5",children:[e("div",{children:e("input",{className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Search...",type:"search",onChange:t=>F(t.target.value)})}),s("div",{className:"flex justify-between space-x-2 items-center align-middle ",children:[e("label",{htmlFor:"pagePer",className:"text-sm py-1.5 pl-3 font-medium leading-6 text-gray-900",children:"Page Per"}),s("select",{className:"rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6",value:w,id:"pagePer",onChange:t=>I(t.target.value),children:[e("option",{value:"5",children:"5"}),e("option",{value:"10",children:"10"}),e("option",{value:"20",children:"20"}),e("option",{value:"50",children:"50"}),e("option",{value:"9999999999",children:"All"})]})]})]}),s("table",{className:"min-w-full divide-y divide-gray-300",children:[e("thead",{className:"bg-gray-50",children:s("tr",{children:[j.map((t,a)=>{let o=m()+"-"+a+"-"+t.toUpperCase().replace("_"," ");return n.includes(t)===!1&&e(h,{children:e("th",{scope:"col",className:a===0?"py-2 pl-2 pr-2 text-left text-sm font-semibold text-gray-900 sm:pl-6":"px-2 py-2 text-left text-sm font-semibold text-gray-900",onClick:r=>z(t),children:s("div",{className:"group inline-flex",children:[t.toUpperCase().replace("_"," "),t===p?e("span",{className:"ml-2 flex-none rounded bg-gray-100 text-gray-900 group-hover:bg-gray-200",children:b===g?e(H,{className:"h-5 w-5","aria-hidden":"true"}):e(G,{className:"h-5 w-5","aria-hidden":"true"})}):null]})},o)})}),e("th",{children:"Action"},m())]},m())}),s("tbody",{className:"divide-y divide-gray-200 bg-white",children:[f.length===0?e("tr",{children:e("td",{colSpan:l.length,children:e("h1",{className:"p-5 text-center text-2xl text-gray-700 bg-gray-200",children:"No items found"})})}):"",R?e("tr",{children:e("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6",colSpan:l.length+1,children:e("div",{className:"mx-auto flex justify-center w-full",children:e("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin dark:border-violet-400"})})},m())},m()):f.map((t,a)=>{let o=m()+"-"+a;return e(h,{children:s("tr",{children:[l.map((r,A)=>n.includes(r)===!1&&e("td",{className:A===0?"whitespace-nowrap py-2 pl-2 pr-2 text-sm font-medium text-gray-900 sm:pl-6":"whitespace-nowrap px-2 py-2 text-sm text-gray-500",children:L(t[r])},m()+"-"+A)),s("td",{className:"whitespace-nowrap px-2 py-2 text-sm text-gray-500 flex justify-center gap-2 ",children:[e("button",{type:"button",className:"inline-flex items-center gap-x-1.5 rounded-md bg-red-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600",onClick:r=>{r.preventDefault(),M(r,route(d.removeRouteName,t.id))},children:e(le,{className:"-ml-0.5 h-5 w-5","aria-hidden":"true"})}),e(E,{className:"inline-flex items-center gap-x-1.5 rounded-md bg-purple-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-purple-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600",href:route(d.editRouteName,t.id),children:e(J,{className:"-ml-0.5 h-5 w-5","aria-hidden":"true"})}),e("button",{className:`inline-flex items-center gap-x-1.5 rounded-md ${t.certificate_id==="true"?"bg-blue-600":"bg-gray-600"} px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600`,onClick:r=>{r.preventDefault(),U(r,t)},children:e(te,{className:"-ml-0.5 h-5 w-5","aria-hidden":"true"})}),e("button",{className:`inline-flex items-center gap-x-1.5 rounded-md ${t.badge_id==="true"?"bg-green-600 ":"bg-gray-600"} px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600`,onClick:r=>{r.preventDefault(),q(r,t)},children:e(re,{className:"-ml-0.5 h-5 w-5","aria-hidden":"true"})})]},m())]},o)})})]})]}),f.length>0&&!R?e("div",{className:"mt-2",children:e(Q,{pagination:T,pageChanged:t=>y(t),totalItems:f.length})}):null]})})})})};function _(n){window.open(n,"_blank").focus()}const de=ce;function pe({auth:n,pageTitle:c,pageDescription:l,setBadgeUrl:d,setCertUrl:v}){const f={createEditRouteName:"dashboard.global.customers.create",removeALlRouteName:"dashboard.global.customers.removeAll",removeRouteName:"dashboard.global.customers.remove",editRouteName:"dashboard.global.customers.edit",setCertUrl:v,setBadgeUrl:d};return s(K,{user:n.user,children:[e(Y,{title:c}),s("div",{className:"m-5 p-5 flow-root shadow sm:rounded-lg",children:[s("div",{className:"sm:flex sm:items-center",children:[s("div",{className:"sm:flex-auto",children:[e("h1",{className:"text-base font-semibold leading-6 text-gray-900",children:c}),e("p",{className:"mt-2 text-sm text-gray-700",children:l})]}),e("div",{className:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none",children:s(E,{href:route(f.createEditRouteName),className:"inline-flex items-center gap-x-1.5 rounded-md bg-indigo-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 transition ease-in-out duration-150",children:[e(X,{className:"-mr-0.5 h-5 w-5","aria-hidden":"true"}),"Add new"]})})]}),e("div",{className:"mt-8 flow-root",children:e(de,{excludedColumns:[],fetchUrl:route("fetch.customers"),columns:["code","name","birthdate","birthplace","certificate","certifdate","speciality","role","created_at","updated_at"],columNames:["id","name","birth_date","birth_place","certificate","certification_date","speciality","role","created_at","updated_at"],actionUrls:f})})]})]})}export{pe as default};
